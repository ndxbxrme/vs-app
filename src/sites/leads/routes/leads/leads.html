
<div class="leads-route client-management-list">
  <div class="container-xl">
    <div class="row align-items-center">
      <div class="col-md-6">
        <h1><i class="fa-light fa-duotone fa-bars-progress"></i> {{mla('leads-' + roleType + '-heading')}}</h1>
      </div>
      <div class="col-md-6 text-end d-flex align-items-center">
        <input type="text" ng-model="leads.args.where.s.$like" placeholder="Search leads"/>
        <button class="button button-alt orange-button add-lead-button" ng-click="openAddLeadModal()">Add Lead <i class="fa fa-plus"></i></button>
      </div>
    </div>

    <div class="snapshot">
      <div class="snapshot-item">
        <div class="snapshot-label">Today's Leads</div>
        <div class="snapshot-value">{{ todayLeads.total }}</div>
      </div>
      <div class="snapshot-item">
        <div class="snapshot-label">Outstanding Leads</div>
        <div class="snapshot-value">{{ outstandingLeads.total }}</div>
      </div>
      <div class="snapshot-item">
        <div class="snapshot-label">Total Leads</div>
        <div class="snapshot-value">{{ todayLeads.total + outstandingLeads.total }}</div>
      </div>
    </div>

    <div class="controls">
      <div class="row align-items-end">
        <div class="col-md-6">
          <div class="sort">Order By:<br>
            <a class="order-item" href="" ng-click="sort.set(&quot;modifiedAt&quot;)" ng-class="sort.class(&quot;modifiedAt&quot;)">Last Updated</a>
            <a class="order-item" href="" ng-click="sort.set(&quot;date&quot;)" ng-class="sort.class(&quot;date&quot;)">Enquiry Date</a>
          </div>
        </div>
        <div class="col-md-6 text-end">
          <div class="showing">Showing {{leads.total}} of {{allleads.total}} lead{{leads.total!==1?'s':''}}</div>
        </div>
      </div>
    </div>

    <div class="properties-list" ng-show="leads.total">
      <div class="property-card" ng-repeat="lead in leads.items">
        <div class="property-main row g-5">
          <div class="property-image col-md-2">
            <div class="source-badge {{ lead.source }} {{lead.method}}"></div>
          </div>
          
          <div class="property-info col-md-7">
            <div class="property-meta">
              <div class="property-address">
                <strong>Address:</strong> 
                <a ui-sref="leads_lead({_id:lead._id})">
                  {{ lead.property.address || lead.user.address}}
                </a>
              </div>
              <span class="price" ng-show="lead.price"><strong>Price:</strong> {{ lead.price | currency:'Â£'}}</span>
            </div>

            <div class="lead-details">
              <p class="applicant-info"><i class="fa-duotone fa-light fa-user"></i> <strong>Applicant:</strong> {{lead.applicant}}</p>
            </div>
          </div>
          
          <div class="property-stats-actions col-md-3">
            <div class="property-vendor">
              <div class="label"><i class="fa-duotone fa-light fa-calendar-check"></i> {{ mla('leads-table-date') }}</div>
              <div class="value">{{lead.date | date:'dd/MM/yy'}} <span class="time-ago">({{lead.date | timeAgo}})</span></div>
            </div>

            <div class="property-actions">
              <a class="button" ui-sref="leads_lead({_id:lead._id})">{{ mla('leads-button-view-lead') }}</a>
            </div>
          </div>
          
        </div>
      </div>
    </div>
    <paging total="leads.total" opts="leads.args"></paging>
    <div ng-show="!leads.total" class="nothing-to-show">
      <h3>{{ mla('leads-message-no-items') }}</h3>
    </div>
  </div>
</div>