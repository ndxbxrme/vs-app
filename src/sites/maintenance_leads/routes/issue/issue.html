
<div class="issue-route route" ng-show="fetched">
  <div class="add-edit" ng-if="!issue.item._id || editing">
    <h1 ng-show="!editing">{{ m('issue-heading-add') }}</h1>
    <h1 ng-show="editing">{{ m('issue-heading-edit') }}</h1>
    <form name="myForm" novalidate="novalidate" autocomplete="off" ng-submit="save('issue')">
      <div class="form-section">
        <div class="form-label">{{ m('issue-label-source') }}</div>
        <div class="form-controls">
          <div class="form-item c-select source required no-label " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
            <div class="input-holder">
              <select sumoselect="{placeholder:m('#{args.prefix}-#{args.name}-placeholder'), search:true}" ng-model="issue.item.source" name="source" ng-disabled="disabled" required="required">
                <option ng-repeat="source in sources" value="{{#{args.name}.#{args.id}}}" ng-disabled="#{args.name}.disabled" ng-hide="#{args.name}.hidden">{{ source.name }}</option>
              </select>
            </div>
            <p class="error" ng-show="submitted &amp;&amp; myForm.source.$error.required">{{ m('issue-source-error-required') }}</p>
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="form-label">{{ m('issue-label-tenant') }}</div>
        <div class="form-controls">
          <div class="third">
            <div class="form-item c-input tenantTitle required  " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
              <label class="label">{{ m('issue-tenantTitle-label') }}</label>
              <input type="text" name="tenantTitle" ng-model="issue.item.tenantTitle" placeholder="{{ m('#{args.prefix}-#{args.name}-placeholder') }}" title="{{ m('#{args.prefix}-#{args.name}-label') }}" ng-disabled="disabled" required="required"/>
              <p class="error" ng-show="submitted &amp;&amp; myForm.tenantTitle.$error.required">{{ m('issue-tenantTitle-error-required') }}    </p>
            </div>
          </div>
          <div class="third">
            <div class="form-item c-input tenantFirstName required  " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
              <label class="label">{{ m('issue-tenantFirstName-label') }}</label>
              <input type="text" name="tenantFirstName" ng-model="issue.item.tenantFirstName" placeholder="{{ m('#{args.prefix}-#{args.name}-placeholder') }}" title="{{ m('#{args.prefix}-#{args.name}-label') }}" ng-disabled="disabled" required="required"/>
              <p class="error" ng-show="submitted &amp;&amp; myForm.tenantFirstName.$error.required">{{ m('issue-tenantFirstName-error-required') }}    </p>
            </div>
          </div>
          <div class="third">
            <div class="form-item c-input tenantLastName required  " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
              <label class="label">{{ m('issue-tenantLastName-label') }}</label>
              <input type="text" name="tenantLastName" ng-model="issue.item.tenantLastName" placeholder="{{ m('#{args.prefix}-#{args.name}-placeholder') }}" title="{{ m('#{args.prefix}-#{args.name}-label') }}" ng-disabled="disabled" required="required"/>
              <p class="error" ng-show="submitted &amp;&amp; myForm.tenantLastName.$error.required">{{ m('issue-tenantLastName-error-required') }}    </p>
            </div>
          </div>
          <div class="form-item c-input tenantPhone required  " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
            <label class="label">{{ m('issue-tenantPhone-label') }}</label>
            <input type="text" name="tenantPhone" ng-model="issue.item.tenantPhone" placeholder="{{ m('#{args.prefix}-#{args.name}-placeholder') }}" title="{{ m('#{args.prefix}-#{args.name}-label') }}" ng-disabled="disabled" required="required"/>
            <p class="error" ng-show="submitted &amp;&amp; myForm.tenantPhone.$error.required">{{ m('issue-tenantPhone-error-required') }}    </p>
          </div>
          <div class="form-item c-input tenantEmail required  " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
            <label class="label">{{ m('issue-tenantEmail-label') }}</label>
            <input type="email" name="tenantEmail" ng-model="issue.item.tenantEmail" placeholder="{{ m('#{args.prefix}-#{args.name}-placeholder') }}" title="{{ m('#{args.prefix}-#{args.name}-label') }}" ng-disabled="disabled" required="required" email="email"/>
            <p class="error" ng-show="submitted &amp;&amp; myForm.tenantEmail.$error.required">{{ m('issue-tenantEmail-error-required') }}    </p>
            <p class="error" ng-show="submitted &amp;&amp; myForm.tenantEmail.$error.email">{{ m('issue-tenantEmail-error-email') }}    </p>
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="form-label">{{ m('issue-label-landlord') }}</div>
        <div class="form-controls">
          <div class="form-item c-select landlordId  no-label " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
            <div class="input-holder">
              <select sumoselect="{placeholder:m('#{args.prefix}-#{args.name}-placeholder'), search:true}" ng-model="issue.item.landlordId" name="landlordId" ng-disabled="disabled">
                <option ng-repeat="landlordId in landlords.items" value="{{#{args.name}.#{args.id}}}" ng-disabled="#{args.name}.disabled" ng-hide="#{args.name}.hidden">{{ landlordId.name }}</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="form-label">{{ m('issue-label-address') }}</div>
        <div class="form-controls">
          <div class="form-item c-input address1 required  " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
            <label class="label">{{ m('issue-address1-label') }}</label>
            <input type="text" name="address1" ng-model="issue.item.address1" placeholder="{{ m('#{args.prefix}-#{args.name}-placeholder') }}" title="{{ m('#{args.prefix}-#{args.name}-label') }}" ng-disabled="disabled" required="required"/>
            <p class="error" ng-show="submitted &amp;&amp; myForm.address1.$error.required">{{ m('issue-address1-error-required') }}    </p>
          </div>
          <div class="form-item c-input address2   " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
            <label class="label">{{ m('issue-address2-label') }}</label>
            <input type="text" name="address2" ng-model="issue.item.address2" placeholder="{{ m('#{args.prefix}-#{args.name}-placeholder') }}" title="{{ m('#{args.prefix}-#{args.name}-label') }}" ng-disabled="disabled"/>
          </div>
          <div class="form-item c-input postcode required  " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
            <label class="label">{{ m('issue-postcode-label') }}</label>
            <input type="text" name="postcode" ng-model="issue.item.postcode" placeholder="{{ m('#{args.prefix}-#{args.name}-placeholder') }}" title="{{ m('#{args.prefix}-#{args.name}-label') }}" ng-disabled="disabled" required="required"/>
            <p class="error" ng-show="submitted &amp;&amp; myForm.postcode.$error.required">{{ m('issue-postcode-error-required') }}    </p>
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="form-label">{{ m('issue-label-title') }}</div>
        <div class="form-controls">
          <div class="form-item c-input title required no-label " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
            <input type="text" name="title" ng-model="issue.item.title" placeholder="{{ m('#{args.prefix}-#{args.name}-placeholder') }}" title="{{ m('#{args.prefix}-#{args.name}-label') }}" ng-disabled="disabled" required="required"/>
            <p class="error" ng-show="submitted &amp;&amp; myForm.title.$error.required">{{ m('issue-title-error-required') }}    </p>
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="form-label">{{ m('issue-label-detail') }}</div>
        <div class="form-controls">
          <div class="form-item c-input details   " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
            <label class="label">{{ m('issue-details-label') }}</label>
            <textarea type="text" name="details" ng-model="issue.item.details" placeholder="{{ m('#{args.prefix}-#{args.name}-placeholder') }}" title="{{ m('#{args.prefix}-#{args.name}-label') }}" ng-disabled="disabled"></textarea>
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="form-label"></div>
        <div class="form-controls">
          <div class="controls">
            <button class="btn cancel" type="button" ng-click="auth.goToLast(&quot;defaultLast&quot;)">{{ m('forms-cancel') }}</button>
            <input class="btn button-alt" type="submit" value="{{ m('#{args.submitText}') }}" ng-disabled="disabled || myForm.$pristine"/>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="issue-details" ng-if="issue.item._id &amp;&amp; !editing">
    <div class="space-between issue-header">
      <div class="left">
        <h1>{{ m('issue-heading-issue') }}</h1>
        <h2>{{ issue.item.address }} <span>{{ issue.item.date | date:medium }}</span></h2>
      </div>
    </div>
    <form class="form-controls" name="myForm" novalidate="novalidate" autocomplete="off" ng-submit="save('issue')">
      <!-- This should always be visible so I have removed this (ng-show='issue.item.statusName==="Reported" || issue.item.statusName==="Completed"'). Possibly need to show but disable edit when completed.-->
      <div class="control-group">
        <div class="status-checkboxes">
          <div class="status-checkbox">
            <input id="sc-booked" type="checkbox" ng-model="issue.item.status.booked" ng-change="issue.save()"/>
            <label for="sc-booked">Booked<i class="fad fa-file-medical"></i></label>
          </div>
          <div class="status-checkbox">
            <input id="sc-completed" type="checkbox" ng-model="issue.item.status.completed" ng-change="issue.save()"/>
            <label for="sc-completed">Job Completed<i class="fad fa-file-check"></i></label>
          </div>
          <div class="status-checkbox">
            <input id="sc-invoiced" type="checkbox" ng-model="issue.item.status.invoiced" ng-change="issue.save()"/>
            <label for="sc-invoiced">Invoice Received<i class="fad fa-thumbs-up"></i></label>
          </div>
        </div>
        <div class="quotes right">
          <div class="quote">
            <label>Contractor Quote</label>
            <input type="text" ng-model="issue.item.quoteContractor" placeholder="Contractor Quote"/>
          </div>
          <div class="quote">
            <label>VitalSpace Quote</label>
            <input type="text" ng-model="issue.item.quoteVitalSpace" placeholder="VitalSpace Quote"/>
          </div>
          <div class="quote-save">
            <button class="button-alt" type="button" ng-click="issue.save()">Save</button>
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="form-label half">
          <div class="source">
            <div class="source-icon {{issue.item.source}}">{{ issue.item.source }}</div>
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="form-label"> <strong>{{ m('issue-heading-tenant-contact') }}</strong>
          <p>{{ issue.item.tenantFirstName }} {{ issue.item.tenantLastName }}</p><a href="mailto:{{issue.item.tenantEmail}}">{{ issue.item.tenantEmail }}</a>
          <p>{{ issue.item.tenantPhone }}</p>
        </div>
        <div class="form-controls space-between">
          <div class="left">
            <div class="title"><strong>{{ m('issue-heading-issue-title') }}</strong><span>&nbsp;- {{ issue.item.title }}</span></div>
            <div class="details"><strong>{{ m('issue-heading-fault-detail') }}</strong><span>&nbsp;- {{ issue.item.details }}</span></div>
          </div>
          <div class="right">
            <div class="edit-icons"><span class="orange">View/Edit</span>
              <div class="pdf"><a href="/api/fixflo/pdf/{{issue.item.fixfloId}}" target="_blank"><i class="fad fa-file-pdf"></i></a></div><span ng-click="$parent.showLightbox(issue.item.media)"><i class="fad fa-camera-retro" ng-show="issue.item.media.length"></i></span><span ng-click="$parent.editing=true" ng-hide="editing" ng-class="{disabled:issue.item.statusName===&quot;Completed&quot;}"><i class="fad fa-edit"></i></span>
            </div>
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="form-label">{{ m('issue-heading-landlord') }}</div>
        <div class="form-controls">
          <div class="form-item c-select landlordId  no-label " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
            <div class="input-holder">
              <select sumoselect="{placeholder:m('#{args.prefix}-#{args.name}-placeholder'), search:true}" ng-model="issue.item.landlordId" name="landlordId" ng-disabled="disabled" ng-change="issue.save()">
                <option ng-repeat="landlordId in landlords.items" value="{{#{args.name}.#{args.id}}}" ng-disabled="#{args.name}.disabled" ng-hide="#{args.name}.hidden">{{ landlordId.name }}</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="form-label">{{ m('issue-heading-action-taken') }}</div>
        <div class="form-controls">
          <div class="third">
            <div class="form-item c-select repliedToTenant required  " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
              <label class="label">{{ m('issue-repliedToTenant-label') }}</label>
              <div class="input-holder">
                <select sumoselect="{placeholder:m('#{args.prefix}-#{args.name}-placeholder'), search:true}" ng-model="issue.item.repliedToTenant" name="repliedToTenant" ng-disabled="issue.item.statusName===&quot;Completed&quot;" ng-change="issue.save()" required="required">
                  <option ng-repeat="repliedToTenant in yesno" value="{{#{args.name}.#{args.id}}}" ng-disabled="#{args.name}.disabled" ng-hide="#{args.name}.hidden">{{ repliedToTenant.name }}</option>
                </select>
              </div> 
              <p class="error" ng-show="submitted &amp;&amp; myForm.repliedToTenant.$error.required">{{ m('issue-repliedToTenant-error-required') }}</p>
            </div>
          </div>
          <div class="third">
            <div class="form-item c-select landlordInformed required  " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
              <label class="label">{{ m('issue-landlordInformed-label') }}</label>
              <div class="input-holder">
                <select sumoselect="{placeholder:m('#{args.prefix}-#{args.name}-placeholder'), search:true}" ng-model="issue.item.landlordInformed" name="landlordInformed" ng-disabled="issue.item.statusName===&quot;Completed&quot;" ng-change="issue.save()" required="required">
                  <option ng-repeat="landlordInformed in yesno" value="{{#{args.name}.#{args.id}}}" ng-disabled="#{args.name}.disabled" ng-hide="#{args.name}.hidden">{{ landlordInformed.name }}</option>
                </select>
              </div>
              <p class="error" ng-show="submitted &amp;&amp; myForm.landlordInformed.$error.required">{{ m('issue-landlordInformed-error-required') }}</p>
            </div>
          </div>
          <div class="third">
            <div class="form-item c-select contractorArranged required  " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
              <label class="label">{{ m('issue-contractorArranged-label') }}</label>
              <div class="input-holder">
                <select sumoselect="{placeholder:m('#{args.prefix}-#{args.name}-placeholder'), search:true}" ng-model="issue.item.contractorArranged" name="contractorArranged" ng-disabled="issue.item.statusName===&quot;Completed&quot;" ng-change="issue.save()" required="required">
                  <option ng-repeat="contractorArranged in yesno" value="{{#{args.name}.#{args.id}}}" ng-disabled="#{args.name}.disabled" ng-hide="#{args.name}.hidden">{{ contractorArranged.name }}</option>
                </select>
              </div>
              <p class="error" ng-show="submitted &amp;&amp; myForm.contractorArranged.$error.required">{{ m('issue-contractorArranged-error-required') }}</p>
            </div>
          </div>
        </div>
      </div>
      <div class="form-section" ng-show="issue.item.statusName!==&quot;Completed&quot;">
        <div class="form-label">{{ m('issue-heading-contractor-assigned') }}</div>
        <div class="form-controls">
          <div class="two-thirds">
            <div class="form-item c-select booked   " ng-class="{warning: submitted #{'&amp;&amp;'} #{formName}.#{args.name}.$invalid}">
              <label class="label">{{ m('issue-booked-label') }}</label>
              <div class="input-holder">
                <select sumoselect="{placeholder:m('#{args.prefix}-#{args.name}-placeholder'), search:true}" ng-model="tasks.items[0].contractor" name="booked" ng-disabled="true">
                  <option ng-repeat="booked in contractors.items" value="{{#{args.name}.#{args.id}}}" ng-disabled="#{args.name}.disabled" ng-hide="#{args.name}.hidden">{{ booked.name }}</option>
                </select>
              </div>
            </div>
          </div>
          <div class="third delete-book">
            <button class="button-alt" type="button" ng-click="deleteIssue(issue)"> <i class="fal fa-trash-alt"></i>{{ m('forms-delete') }}</button>
            <!--button.button-green(type='submit', value='{{ m("forms-book") }}', ng-hide='issue.item.contractor || issue.item.statusName==="Completed"')
            i.fal.fa-ballot-check
            | Book
            -->
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="form-label">{{ m('issue-heading-diary') }}</div>
        <div class="form-controls diary-controls">
          <button class="button-grey" type="button" ui-sref="diary({_id:issue.item._id})"><i class="fal fa-calendar"></i>{{ m('issue-diary-label') }}</button>
          <input class="task-time" type="text" value="{{tasks.items[0].date | date:&quot;HH:mm&quot;}}" disabled="disabled" ng-hide="issue.item.statusName===&quot;Reported&quot;"/>
          <input class="task-date" type="text" value="{{tasks.items[0].date | date:&quot;dd/MM/yyyy&quot;}}" disabled="disabled" ng-hide="issue.item.statusName===&quot;Reported&quot;"/>
        </div>
      </div>
      <!--.form-section(ng-show='issue.item.cfpJobNumber && issue.item.statusName==="Booked" && tasks.total')
      .form-label {{ m('issue-heading-chase') }}
      .form-controls
        .buttons
          button.button-alt(type='button', ng-click='chaseContractor("email", tasks.items[0])') 
            i.fal.fa-at
            | {{ m('issue-label-email') }}
          button.button-grey(type='button', ng-click='chaseContractor("sms", tasks.items[0])') 
            i.fal.fa-sms
            | {{ m('issue-label-sms') }}
      -->
      <!--.form-section(ng-show='issue.item.cfpJobNumber && issue.item.statusName==="Booked" && tasks.total')
      .form-label {{ m('issue-heading-inform') }}
      .form-controls
        .buttons
          button.button-alt(type='button', ng-click='informTenant("email", tasks.items[0])') 
            i.fal.fa-at
            | {{ m('issue-label-email-tenant') }}
          button.button-grey(type='button', ng-click='informTenant("sms", tasks.items[0])') 
            i.fal.fa-sms
            | {{ m('issue-label-sms-tenant') }}
      -->
      <div class="form-section" ng-show="issue.item.cfpJobNumber &amp;&amp; issue.item.statusName===&quot;Booked&quot; &amp;&amp; tasks.total">
        <div class="form-label">{{ m('issue-heading-chase-invoice') }}</div>
        <div class="form-controls">
          <div class="buttons">
            <button class="button-alt" type="button" ng-click="chaseInvoice(&quot;email&quot;, tasks.items[0])"> <i class="fal fa-at"></i>{{ m('issue-label-email-invoice') }}</button>
            <button class="button-grey" type="button" ng-click="chaseInvoice(&quot;sms&quot;, tasks.items[0])"> <i class="fal fa-sms"></i>{{ m('issue-label-sms-invoice') }}</button>
          </div>
        </div>
      </div>
      <!--.form-section(ng-show='issue.item.cfpJobNumber && issue.item.statusName==="Booked"') Removed cfp part so the complete butotn shows-->
      <div class="form-section" ng-show="issue.item.statusName===&quot;Booked&quot;">
        <div class="form-label">{{ m('issue-heading-complete') }}</div>
        <div class="form-controls">
          <div class="buttons">
            <button class="button-green" type="button" ng-click="completeIssue(issue)"> <i class="fal fa-check"></i>{{ m('issue-label-complete') }}</button>
          </div>
        </div>
      </div>
    </form>
    <!--.tasks(ng-show='tasks.total')
    h2 Tasks
    .task(ng-repeat='task in tasks.items')
      .date 
        span {{task.date| date:medium}}
      .contractor {{task.contractorName}}
      .status(ng-class='task.status')
        .booked 
          .fad.fa-file-medical
        .completed
          .fad.fa-file-check
        .invoiced
          .fad.fa-thumbs-up
    -->
    <h2>Documents<sup ng-show="issue.item.documents.length">{{issue.item.documents.length}}</sup></h2>
    <button class="view-documents" ng-click="showDocuments = !showDocuments">{{showDocuments?'Hide':'View'}} Documents</button>
    <div class="documents" ng-show="showDocuments">
      <div class="drop-box" ngf-drop="uploadFiles($files)" ngf-drag-over-class="'dragover'" ngf-multiple="true">
        <h3>Drop files here to upload</h3>
        <button class="file-upload" type="file" ngf-select="uploadFiles($file, $invalidFiles)">Or click here to choose</button>
      </div>
      <div class="document-list" ng-show="issue.item.documents.length">
        <div class="document" ng-repeat="document in issue.item.documents"><a class="document-link" ng-href="{{makeDownloadUrl('maintenance_leads',document)}}" target="_self"><img ng-src="{{makeDownloadUrl('maintenance_leads',document)}}" ng-if="document.basetype===&quot;image&quot;"/>
            <div class="document-icon {{document.basetype}}" ng-hide="document.basetype===&quot;image&quot;"><img class="logo" src="public/img/icons/vs-document.png"/></div></a>
          <div class="filename"> 
            <label>Name: </label><span ng-show="!document.editing">&nbsp;{{document.name || document.originalFilename}}</span>
            <input type="text" ng-model="document.name" ng-show="document.editing" placeholder="Name"/>
          </div>
          <div class="by"> 
            <label>Created by: </label>{{document.user.local.email}}
          </div>
          <div class="on"> 
            <label>Created on: </label>{{document.date | date:'mediumDate'}}
          </div>
          <div class="controls" ng-show="auth.checkRoles([&quot;superadmin&quot;, &quot;admin&quot;])"><a class="edit" href="" ng-click="document.editing=!document.editing" ng-show="!document.editing">Edit</a><a class="save" href="" ng-click="saveDocument(document)" ng-show="document.editing">Save</a><a class="delete" href="" ng-click="deleteDocument(document)">Delete</a></div>
        </div>
      </div>
    </div>
    <div class="notes-and-messages">
      <div class="case-notes">
        <h2 class="orange">{{ m('issue-heading-notes') }}</h2>
        <div class="case-note" ng-repeat="note in notesData = ( issue.item.notes | orderBy:&quot;-date&quot; ) | limitTo:notesLimit:notesLimit*(notesPage-1)">
          <div class="date">{{note.date | date:medium}} | <img gravatar-src="note.user.local.email"/><span>{{note.user.displayName || note.user.local.email}}</span><a class="delete" href="" ng-click="deleteNote(note)" ng-show="auth.checkRoles([&quot;admin&quot;, &quot;superadmin&quot;])">{{ m('forms-delete') }}</a><a class="edit" href="" ng-click="editNote(note)" ng-show="auth.checkRoles([&quot;admin&quot;,&quot;superadmin&quot;])">{{ m('forms-edit') }}</a></div>
          <div class="note"> 
            <div class="details"><span ng-show="note.side">- {{note.side}}</span>
              <div class="note-body" ng-bind-html="note.text | markdown:true"></div>
            </div>
          </div>
        </div>
        <pagination class="pagination-sm pagination" total="notesData.length" ng-model="notesPage" page-size="notesLimit"></pagination>
        <div class="add-note">
          <code-mirror ng-model="$parent.note.text" options="{mode:markdown, lineWrapping:true}"></code-mirror>
          <button type="button" ng-click="addNote()"> 
            <div class="fal fa-plus"></div>{{note.date?'Update':'Add'}} Note
          </button>
        </div>
      </div>
      <message-center ng-if="issue.item &amp;&amp; tasks.items"></message-center>
    </div>
  </div>
</div>