<div class="users mt-5">
  <div class="container-xl" ng-if="(myusers.items | filter: {'displayName': '!'}).length > 0">
    <div class="table-heading">
      <h3>Pending Users</h3>
    </div>
    
    <!-- User Cards -->
    <div class="users-cards">
      <div class="user-card" ng-repeat="user in myusers.items | filter:{'displayName':'!'} | orderBy:'displayName'">
        <!-- User Header -->
        <div class="user-card-header">
          <div class="user-info">
            <img gravatar-src="user.local.email" gravatar-size="48" class="user-avatar" />
            <div class="user-details">
              <div class="display-name">{{user.displayName}}</div>
              <div class="user-email">{{user.local.email}}</div>
              <div class="password-reset-badge" ng-if="user.code">Awaiting reset</div>
            </div>
          </div>
          <div class="user-actions">
            <a class="reset-btn button" href="" ng-click="resetUser(user)">
              Reset <i class="fa-light fa-rotate-right"></i>
            </a>
            <a class="delete-btn button button-alt" href="" ng-click="deleteUser(user)">
              Delete <i class="fa-light fa-duotone fa-trash"></i>
            </a>
          </div>
        </div>
        
        <!-- User Roles -->
        <div class="user-roles">
          <div class="role-cells">
            <div
              class="role-cell"
              ng-repeat="site in sites track by site.id"
              ng-click="swapRole(user, site.id)"
              title="{{site.name}} - {{user.local.sites[site.id].role}}"
              ng-style="{'background-color': roleData[user.local.sites[site.id].role].color + '50'}"
            >
              <div class="site-name">{{site.name}}</div>
              <i ng-class="getIconClass(user.local.sites[site.id].role, user)"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="container-xl" ng-if="(myusers.items | filter: {'displayName': ''}).length > 0">
    <div class="header-row d-flex align-items-center justify-content-between mb-4">
      <div class="col-sm-6">
        <h1><i class="fa-duotone fa-light fa-users"></i> Users</h1>
      </div>
      <div class="col-sm-6 text-end">
        <button class="btn-add-user button button-alt" ng-click="addEditUser()">Add New User <i class="fa-duotone fa-light fa-user-plus"></i></button>
      </div>
    </div>
    
    <!-- User Cards -->
    <div class="users-cards">
      <div class="user-card" ng-repeat="user in myusers.items | filter:{'displayName':''} | orderBy:'displayName'">
        <!-- User Header -->
        <div class="user-card-header">
          <div class="user-info">
            <img gravatar-src="user.local.email" gravatar-size="48" class="user-avatar" />
            <div class="user-details">
              <div class="display-name">{{user.displayName}}</div>
              <div class="user-email">{{user.local.email}}</div>
              <div class="password-reset-badge" ng-if="user.code">Awaiting reset</div>
            </div>
          </div>
          <div class="user-actions">
            <a class="reset-btn button" href="" ng-click="resetUser(user)">
              Reset <i class="fa-light fa-rotate-right"></i>
            </a>
            <a class="delete-btn button button-alt" href="" ng-click="deleteUser(user)">
              Delete <i class="fa-light fa-duotone fa-trash"></i>
            </a>
          </div>
        </div>
        
        <!-- User Roles -->
        <div class="user-roles">
          <div class="role-cells">
            <div
              class="role-cell"
              ng-repeat="site in sites track by site.id"
              ng-click="swapRole(user, site.id)"
              title="{{site.name}} - {{user.local.sites[site.id].role}}"
              ng-style="{'background-color': roleData[user.local.sites[site.id].role].color + '50'}"
            >
              <div class="site-name">{{site.name}}</div>
              <i ng-class="getIconClass(user.local.sites[site.id].role, user)"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
